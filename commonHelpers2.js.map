{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-video.js"],"sourcesContent":["import Player from '@vimeo/player';\nimport throttle from 'lodash.throttle';\n\nconst LS_KEY = 'videoplayer-current-time';\nconst iframe = document.querySelector('iframe');\nconst player = new Player(iframe);\n\n// Saving the player's activity in Local Storage\n\nconst onPlay = function (data) {\n  try {\n    const strigifiedData = JSON.stringify(data);\n    localStorage.setItem(LS_KEY, strigifiedData);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\nplayer.on('timeupdate', throttle(onPlay, 1000));\n\n// Function to transfer pause to a newly loaded page\nconst onPlayback = function () {\n  try {\n    const breakpoint = localStorage.getItem(LS_KEY);\n    if (JSON.parse(breakpoint) === null) {\n      return;\n    }\n    let paused = JSON.parse(breakpoint)['seconds'];\n    paused = player.setCurrentTime(paused);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\nonPlayback();\n\nplayer.getVideoTitle().then(function (title) {\n  console.log('title:', title);\n});\n\n// VideoPlayer styles\n\niframe.style.cssText = `position: absolute;\n  top: 10%;\n  left: 50%;\n  transform: translate(-50%, 0%);\n  box-shadow: rgb(38, 57, 77) 0px 20px 30px -10px;\n  z-index: 10`;\n\n// Mirrored background\n\niframe.insertAdjacentHTML(\n  'afterend',\n  `<iframe\n      id=\"vimeo-reflection\"\n      src=\"https://player.vimeo.com/video/878916453?autopause=false\"\n      width=\"640\"\n      height=\"360\"\n      frameborder=\"0\"\n      allowfullscreen\n      allow=\"autoplay; encrypted-media\"\n    ></iframe>`\n);\n\nconst reflect = document.querySelector('#vimeo-reflection');\nconst reflection = new Player(reflect);\n\nreflect.style.cssText = `position: absolute;\ntop: -20%;\nleft: -20%;\nwidth: 150%;\nheight: 150%;\nopacity: 0.5;\n `;\n\nreflection.setMuted(true);\n\nplayer.setAutopause(false);\n\niframe.focus();\n\nplayer.on('play', () => {\n  player.getCurrentTime().then(time => {\n    reflection.setCurrentTime(time);\n  });\n  reflection.play();\n});\n\nplayer.on('pause', () => {\n  reflection.pause();\n});\n"],"names":["LS_KEY","iframe","player","Player","onPlay","data","strigifiedData","error","throttle","onPlayback","breakpoint","paused","title","reflect","reflection","time"],"mappings":"0IAGA,MAAMA,EAAS,2BACTC,EAAS,SAAS,cAAc,QAAQ,EACxCC,EAAS,IAAIC,EAAOF,CAAM,EAI1BG,EAAS,SAAUC,EAAM,CAC7B,GAAI,CACF,MAAMC,EAAiB,KAAK,UAAUD,CAAI,EAC1C,aAAa,QAAQL,EAAQM,CAAc,CAC5C,OAAQC,EAAP,CACA,QAAQ,MAAM,oBAAqBA,EAAM,OAAO,CACjD,CACH,EACAL,EAAO,GAAG,aAAcM,EAASJ,EAAQ,GAAI,CAAC,EAG9C,MAAMK,EAAa,UAAY,CAC7B,GAAI,CACF,MAAMC,EAAa,aAAa,QAAQV,CAAM,EAC9C,GAAI,KAAK,MAAMU,CAAU,IAAM,KAC7B,OAEF,IAAIC,EAAS,KAAK,MAAMD,CAAU,EAAE,QACpCC,EAAST,EAAO,eAAeS,CAAM,CACtC,OAAQJ,EAAP,CACA,QAAQ,MAAM,oBAAqBA,EAAM,OAAO,CACjD,CACH,EACAE,IAEAP,EAAO,cAAe,EAAC,KAAK,SAAUU,EAAO,CAC3C,QAAQ,IAAI,SAAUA,CAAK,CAC7B,CAAC,EAIDX,EAAO,MAAM,QAAU;AAAA;AAAA;AAAA;AAAA;AAAA,eASvBA,EAAO,mBACL,WACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eASF,EAEA,MAAMY,EAAU,SAAS,cAAc,mBAAmB,EACpDC,EAAa,IAAIX,EAAOU,CAAO,EAErCA,EAAQ,MAAM,QAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAQxBC,EAAW,SAAS,EAAI,EAExBZ,EAAO,aAAa,EAAK,EAEzBD,EAAO,MAAK,EAEZC,EAAO,GAAG,OAAQ,IAAM,CACtBA,EAAO,eAAc,EAAG,KAAKa,GAAQ,CACnCD,EAAW,eAAeC,CAAI,CAClC,CAAG,EACDD,EAAW,KAAI,CACjB,CAAC,EAEDZ,EAAO,GAAG,QAAS,IAAM,CACvBY,EAAW,MAAK,CAClB,CAAC"}